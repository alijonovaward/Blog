{% extends "base.html" %}
{% block title %}{{ article.title }}{% endblock %}

{% block content %}
<div class="card">
    <h2>{{ article.title }}</h2>
    <p>{{ article.content|linebreaks }}</p>
</div>
<div class="back-container">
    <a href="{% url 'article_list' %}" class="back-btn">â¬… Orqaga</a>
</div>
<div class="comments-section">
        <h3>ðŸ’¬ Kommentlar ({{ comments.count }})</h3>

        {% if request.user.is_authenticated %}
        <div class="comment-form">
            <form method="post" action="{% url 'add_comment' 'articles' 'article' article.id %}">
                {% csrf_token %}
                <textarea name="content" rows="4" placeholder="Fikringizni bildiring..." required></textarea>
                <button type="submit" class="btn">ðŸ“¤ Yuborish</button>
            </form>
        </div>
        {% else %}
        <div class="login-prompt">
            <p>Komment qoldirish uchun <a href="{% url 'login' %}">tizimga kiring</a></p>
        </div>
        {% endif %}

        <ul class="comment-list">
            {% for comment in comments %}
            <li class="comment-item">
                <div class="comment-author">{{ comment.user.username }}</div>
                <div class="comment-content">{{ comment.content }}</div>
            </li>
            {% empty %}
            <li class="no-comments">Hozircha kommentlar yo'q. Birinchi bo'lib komment qoldiring! ðŸ’­</li>
            {% endfor %}
        </ul>
    </div>
<style>
/* Orqaga tugma container */
.back-container {
    margin-top: 30px; /* maqola va kommentlardan biroz pastroq */
    text-align: left; /* chapga joylashtirish */
}

/* Orqaga tugma styling */
.back-btn {
    display: inline-block;
    background-color: #4CAF50;
    color: white;
    padding: 10px 16px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    transition: all 0.2s ease-in-out;
}

.back-btn:hover {
    background-color: #45a049;
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0,0,0,0.25);
}
</style>
{% endblock %}
